<div class="loginContainer" fxLayout="column" fxLayoutAlign="center center">
  <mat-tab-group>
    <mat-tab label="Login" fxLayout="column" fxLayoutAlign="center center">
      <mat-card-content>
        <form
          [formGroup]="loginForm"
          novalidate
          fxLayout="column"
          fxLayoutAlign="space-between end"
          (ngSubmit)="myLoginForm.resetForm()"
          #myLoginForm="ngForm"
        >
          <section>
            <mat-form-field>
              <mat-label>Email</mat-label>
              <input matInput placeholder="Email" formControlName="email" />
              <mat-error class="warning" *ngIf="(loginForm.controls['email'].dirty || loginForm.controls['email'].touched) && loginForm.controls['email'].hasError('pattern')">
                Invalid email adress
              </mat-error>
              <mat-error class="warning" *ngIf="(loginForm.controls['email'].dirty || loginForm.controls['email'].touched) && loginForm.controls['email'].hasError('required')">
                Email is required
              </mat-error>
            </mat-form-field>
          </section>

          <section>
            <mat-form-field>
              <mat-label>Password</mat-label>
              <input
                matInput
                [type]="hidePassword ? 'password' : 'text'"
                (keyup.enter)="loginForm.valid ? login() : null"
                placeholder="Password"
                formControlName="password"
              />
              <mat-icon
                style="cursor: pointer"
                matSuffix
                (click)="hidePassword = !hidePassword"
                >{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon
              >
              <mat-error *ngIf="loginForm.controls['password'].hasError('required')">
                Password is required
              </mat-error>
            </mat-form-field>
          </section>
          <span class="invalidLogin" *ngIf="invalidLogin"
            >Your credentials are invalid, please try again.</span
          >
          <button
          mat-raised-button
          (click)="login()"
          [disabled]="!loginForm.valid"
          >
            Login
          </button>
          
          <section class="signinOptions">
            <p>Sign in with :</p>
            <div>
              <div id="g_id_onload"
                data-client_id="1049656311631-hrvup39kcdqu3ng2js7ce6r9g9skuopq.apps.googleusercontent.com"
                data-auto_prompt="false"
                data-callback="handleCredentialResponse">
              </div>
              <div class="g_id_signin"
                data-type="standard"
                data-size="medium"
                data-theme="outline"
                data-text="sign_in_with"
                data-shape="rectangular"
                data-logo_alignment="left">
              </div>
            </div>
          </section>
        </form>
      </mat-card-content>
    </mat-tab>
    <mat-tab label="Register">
      <form
        [formGroup]="registerForm"
        novalidate
        fxLayout="column"
        fxLayoutAlign="space-between end"
      >
        <section>
          <mat-form-field>
            <mat-label>Email</mat-label>
            <input matInput placeholder="Email" formControlName="email" />
            <mat-error
              *ngIf="registerForm.controls['email'].hasError('required')"
            >
              Email is required
            </mat-error>
            <mat-error *ngIf="registerForm.controls['email'].hasError('pattern')">
              Invalid email adress
            </mat-error>
          </mat-form-field>
        </section>

        <section>
          <mat-form-field>
            <mat-label>Nickname</mat-label>
            <input
              matInput
              type="text"
              (keyup.enter)="registerForm.valid ? login() : null"
              placeholder="Nickname"
              formControlName="nickname"
            />
            <mat-error>Nickname is required</mat-error>
          </mat-form-field>
        </section>

        <section>
          <mat-form-field>
            <mat-label>Password</mat-label>
            <input
              matInput
              [type]="hideRegisterPassword ? 'password' : 'text'"
              (keyup.enter)="registerForm.valid ? login() : null"
              placeholder="Password"
              formControlName="password"
            />
            <mat-icon
              style="cursor: pointer"
              matSuffix
              (click)="hideRegisterPassword = !hideRegisterPassword"
              >{{
                hideRegisterPassword ? 'visibility_off' : 'visibility'
              }}</mat-icon
            >
            <mat-error>Password is required</mat-error>
          </mat-form-field>
        </section>

        <section>
          <mat-form-field>
            <mat-label>Password confirm</mat-label>
            <input
              matInput
              [type]="hideRegisterPasswordConfirm ? 'password' : 'text'"
              (keyup.enter)="registerForm.valid ? login() : null"
              placeholder="Password"
              formControlName="passwordConfirm"
            />
            <mat-icon
              style="cursor: pointer"
              matSuffix
              (click)="
                hideRegisterPasswordConfirm = !hideRegisterPasswordConfirm
              "
              >{{
                hideRegisterPasswordConfirm ? 'visibility_off' : 'visibility'
              }}</mat-icon
            >
            <mat-error>You must confirm your password</mat-error>
          </mat-form-field>
        </section>

        <button
          mat-raised-button
          (click)="register()"
          [disabled]="!registerForm.valid"
        >
          Register
        </button>
      </form>
    </mat-tab>
  </mat-tab-group>
</div>
